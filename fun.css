/* -----------------------
   画面中央に配置する
------------------------ */
.center-wrapper {
    position: fixed;
    inset: 0;
    display: flex;
    flex-direction: column; 
    align-items: center;
    justify-content: center;
    background: #008b8b;
    z-index: 9999;
}

/* --- 砂時計コンテナ --- */
.hourglass-container {
    position: relative;
    width: 90px;      /* ← 小さくして可愛いサイズ感 */
    height: 140px;    /* ← 比率そのまま小型化 */
    animation: rotate-hourglass 22500s cubic-bezier(0.65, 0, 0.35, 1) infinite;
}

/* --- 共通画像のスタイル --- */
.hourglass-frame, .sand-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* --- 1. 枠線 (一番手前に表示) --- */
.hourglass-frame {
    z-index: 10;
    pointer-events: none;
}

/* --- 2. 砂 (中身) の制御 --- */
.sand-top {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 50%; /* 上半分 */
    overflow: hidden;
    z-index: 1;
    display: flex;
    justify-content: center; /* ← 中央寄せを補強 */
}

.sand-top img {
    width: auto;        /* ← これが最重要！横幅の強制フィットを解除 */
    height: 200%;       
    max-width: none;    /* ← ブラウザによる勝手な縮小を防ぐ */
    display: block;
    margin: 0 auto;     /* ← 中央に寄せる（枠より小さい場合に必要） */
    object-fit: contain; /* ← つぶれ防止（念のため） */
}

.sand-bottom {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 50%; /* 下半分 */
    overflow: hidden;
    z-index: 1;
    display: flex;
    align-items: flex-end; 
    justify-content: center; /* ← 中央寄せを補強 */
}

.sand-bottom img {
    width: auto;        /* ← これが最重要！横幅の強制フィットを解除 */
    height: 200%;       
    max-width: none;    /* ← ブラウザによる勝手な縮小を防ぐ */
    display: block;
    margin: 0 auto;     /* ← 中央に寄せる（枠より小さい場合に必要） */
    object-fit: contain; /* ← つぶれ防止（念のため） */
}


/* 砂のアニメーション用マスク */
.mask-top, .mask-bottom {
    position: absolute;
    width: 100%;
    background-color: #008b8b; /* 背景色で隠す */
    z-index: 5;
    /* top/bottom は animation内で制御するためここでは指定しない、あるいは初期値を設定 */
}

/* 上の砂（青）のマスク */
.mask-top {
    animation: sand-drop-top 22500s linear infinite;
}

/* 下の砂（赤）のマスク */
.mask-bottom {
    animation: sand-fill-bottom 22500s linear infinite;
}


/* --- アニメーション定義 (Keyframes) --- */

/* 回転アニメーション */
@keyframes rotate-hourglass {
    0%      { transform: rotate(0deg); }
    45%  { transform: rotate(0deg); }   
    50%     { transform: rotate(180deg); } 
    95%  { transform: rotate(180deg); } 
    100%    { transform: rotate(360deg); } 
}

/* 【修正版】上の砂（青）の動き 
   前半: そのまま落ちる (top基準)
   後半: 180度回転後、下から溜まる動きになる (bottom基準へ切り替え)
*/
@keyframes sand-drop-top {
    /* --- 前半: 砂が落ちる（通常） --- */
    /* top:0 で固定し、heightを0→100%にすることで上から隠していく */
    0%      { top: 0; bottom: auto; height: 0%; }   /* 満タン */
    45%  { top: 0; bottom: auto; height: 100%; } /* 空っぽ */
    50%     { top: 0; bottom: auto; height: 100%; } /* 回転中維持 */

    /* --- 後半: 逆さまで「溜まる」役割 --- */
    /* 回転して「視覚的には下」にありますが、DOM内では「上部要素」です。
       ここを「底（画像のフタ側）から溜める」には、マスクを「くびれ側（bottom）」に固定し、
       heightを100%→0%に減らすことで、画像のTop（視覚的な底）を露出させます。
    */
    50.1%   { top: auto; bottom: 0; height: 100%; } /* 空っぽ（マスク全開） */
    95%  { top: auto; bottom: 0; height: 0%; }   /* 満タン（マスクなし） */
    100%    { top: auto; bottom: 0; height: 0%; }
}

/* 【修正版】下の砂（赤）の動き
   前半: 溜まる (top基準)
   後半: 180度回転後、上から落ちる動きになる (bottom基準へ切り替え)
*/
@keyframes sand-fill-bottom {
    /* --- 前半: 砂が溜まる（通常） --- */
    /* top:0 にマスクを固定し、heightを100%→0%にすることで、底（画像のBottom）から見せる */
    0%      { top: 0; bottom: auto; height: 100%; } /* 空っぽ */
    48%  { top: 0; bottom: auto; height: 0%; }   /* 満タン */
    50%     { top: 0; bottom: auto; height: 0%; }   /* 回転中維持 */

    /* --- 後半: 逆さまで「落ちる」役割 --- */
    /*
       回転して「視覚的には上」にあります。
       ここを「上（画像のフタ側）から減らす」には、マスクを「フタ側（bottom）」に固定し、
       heightを0%→100%に増やすことで、画像のBottom（視覚的な上）から隠します。
    */
    50.1%   { top: auto; bottom: 0; height: 0%; }   /* 満タン */
    98%  { top: auto; bottom: 0; height: 100%; } /* 空っぽ */
    100%    { top: auto; bottom: 0; height: 100%; }
}

.timer-box {
    margin-top: 20px;
    text-align: center;
}

#countup-timer {
    color: white;
    font-size: 22px;
    font-weight: bold;
}

/* --- デジタル時計風タイマー --- */
.digital-timer {
    font-family: 'Orbitron', sans-serif;
    font-size: 32px;
    font-weight: 700;
    color: #ffffff;               
    background: #008b8b; /* 半透明の黒背景 */
    padding: 8px 18px;
    border-radius: 8px;
    letter-spacing: 2px;
    display: inline-block;
    margin-top: 20px;
}

/* 戻るボタン */
.back-button {
    position: fixed;
    top: 15px;
    left: 15px;
    width: 55px;
    height: 55px;
    z-index: 10000;
    cursor: pointer;
}

/* ホバーでふわっと拡大 */
.swing-icon {
    width: 100%;
    height: 100%;
    transition: transform 0.25s ease, opacity 0.25s ease;
    filter: drop-shadow(0 0 5px rgba(0,0,0,0.4));
}

.back-button:hover .swing-icon {
    transform: scale(1.18);
}

/* SVG の共通 */
.color-icon .arrow {
    fill: none;
    stroke: white;
    stroke-width: 14;
    stroke-linecap: round;
    stroke-linejoin: round;
}

.color-icon .ring {
    fill: none;
    stroke-width: 10;
}

/* ランダム 3 色 */
[data-color="blue"] .ring {
    stroke: url(#gradBlue);
}

[data-color="green"] .ring {
    stroke: url(#gradGreen);
}

[data-color="red"] .ring {
    stroke: url(#gradRed);
}

/* PERFECT アニメ */
.perfect-text {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.5);
    opacity: 0;

    font-family: 'Arial Black', sans-serif;
    font-size: 60px;
    font-weight: 900;
    letter-spacing: 4px;

    color: #ffffff;
    text-shadow:
        0 0 6px #fff,
        0 0 12px #fff,
        0 -2px 8px #ff4444,
        0 2px 8px #8a2be2;

    z-index: 20000;
    transition: opacity 0.45s ease, transform 0.45s ease;
    pointer-events: none;
}

/* === スマホ（max-width:600px）向け：確実に反映させる決定版 === */
@media screen and (max-width: 600px) {

  /* まず center-wrapper が画面を覆って赤が見えない問題を解消する
     → スマホ時だけ透過にして body 背景（または別色）が見えるようにする */
  .center-wrapper {
    background: transparent !important;
  }

  /* body 背景（スマホ時の背景色をここで決める）*/
  body {
    background: #008b8b; /* 必要なら他の色に変えてOK */
  }

  /* 砂時計を大きく（中央に見えるよう余白も調整） */
  .hourglass-container {
    transform: scale(1.0) !important;
    transform-origin: center;
  }

  /* デジタル時計を大きく */
  #countup-timer {
    font-size: 5vw !important;
    font-weight: 500;
    letter-spacing: 1px;
    margin-top: 18px;
  }

  /* 戻るボタンを大きく・押しやすく */
  .back-button {
    width: 60px !important;
    height: 60px !important;
    top: 14px;
    left: 14px;
    z-index: 10001;
  }

  .back-button .swing-icon {
    width: 100%;
    height: 100%;
  }

  /* PERFECT 表示を大きめに */
  .perfect-text {
    font-size: 12vw !important;
  }
}
